ออกแบบตาราง โดยเรียงลำดับการสร้างตาราง จากการสั่งซื้อของ user 

1. Customer (ข้อมูลลูกค้า): เก็บข้อมูลของลูกค้า
- ฟิลด์สำคัญ ได้แก่ รหัสลูกค้า, ชื่อ, อีเมล, เบอร์โทรศัพท์
-  ความสัมพันธ์ระหว่างตารางต่างๆ
-> 1customer มีได้หลายที่อยู่ (Address) - one to many
-> 1customer สั่งซื้อได้หลายครั้ง (Order) - one to many
-> 1customer มีตะกร้าสินค้า 1 ตะกร้า (Cart) - one to one
-> 1customer สามารถทำให้เกิดการตัดสต็อคหลายครั้ง (stock_transaction) - one to many

2. Address (ข้อมูลที่อยู่) : เก็บข้อมูลที่อยู่ของลูกค้า
- ฟิลด์สำคัญ ได้แก่ รหัสที่อยู่, รหัสลูกค้า, บ้านเลขที่,จังหวัด, เลขไปรษณีย์
-  ความสัมพันธ์ระหว่างตารางต่างๆ
-> 1address ใช้จัดส่งได้หลายคำสั่งซื้อ (Order) - one to many
-  เหตุผลในการออกแบบ : ควรแยกออกมาจาก ตาราง customer เพื่อลดการแก้ไขตาราง customer เนื่องจาก ลูกค้าอาจเแก้ไขข้อมูลที่อยู่ และ ลดความซับซ้อนในตาราง customer เนื่องจาก ลูกค้าอาจเพิ่มที่อยู่ที่ทำงานทำให้มีข้อมูลที่อยู่มากกว่า 1 ที่

3.Cart (ช้อมูลตะกร้า) :เก็บข้อมูลสินค้าที่ลูกค้าเลือก
- ฟิลด์สำคัญ ได้แก่ รหัสตะกร้า, รหัสลูกค้า, วัน/เวลาที่แก้ไขข้อมูล
-  ความสัมพันธ์ระหว่างตารางต่างๆ
-> 1cart มีได้หลายรายการสินค้า (Cart_item) - one to many
-  เหตุผลในการออกแบบ : ก่อนจะยืนยันคำสั่งซื้อ(order) ต้องมีตาราง cartเก็บข้อมูลสินค้า เพื่อให้ลูกค้าจัดการกับการสั่งซื้อของตัวเอง ก่อนการสั่งและตัดstock หมายเหตุ ยังไม่ตัดสต็อก

4.Cart_item (ช้อมูลสินค้าในตะกร้า) : เก็บข้อมูลเกี่ยวกับรหัสและจำนวนของแต่ละสินค้าที่ลูกค้าเลือก  
- ฟิลด์สำคัญ ได้แก่
-  ความสัมพันธ์ระหว่างตารางต่างๆ

5.Order (ข้อมูลการสั่งซื้อ): เก็บข้อมูลเกี่ยวกับคำสั่งซื้อ
- ฟิลด์สำคัญ ได้แก่ เลขที่ใบสั่งซื้อ,วันที่สั่งซื้อ, รหัสลูกค้า, สถานะ, และยอดรวม
-  ความสัมพันธ์ระหว่างตารางต่างๆ
-> 1order มีได้หลายรายการสินค้า (Order_item) - one to many
-> 1order มี 1 การจัดส่ง (Shipment) - one to one
-> 1order สามารถทำให้เกิดการตัดสต็อคหลายครั้ง (stock_transaction) - one to many

6. Order_item (ข้อมูลรายการสินค้าในคำสั่งซื้อ): เก็บข้อมูลรายละเอียดของสินค้าที่อยู่ในคำสั่งซื้อ (Order)
- ฟิลด์สำคัญ ได้แก่ เลขที่รายการสินค้า, เลขที่ใบสั่งซื้อ,เลขที่สินค้า, จำนวนที่สั่ง, ราคาต่อหน่วย
- ความสัมพันธ์ระหว่างตารางต่างๆ
-> มีหลาย order_item เกิดขึ้นจาก 1order - many to one
->  มีหลาย order_item ที่อ้างอิงจาก 1 product - many to one
-  เหตุผลในการออกแบบ : 
	1.แยกข้อมูลสินค้าออกมาจากตาราง order เพื่อลดการซ้ำซ้อนของข้อมูลและทำให้การจัดการ	ข้อมูลเป็นระบบมากขึ้น
	2.สินค้าแต่ละรายการจำเป็นต้องอ้างอิงถึงข้อมูลสินค้าจริง การอ้างอิงโดยใช้เลขที่	สินค้า(product_id) ช่วยให้สามารถดึงข้อมูลสินค้าได้โดยไม่ต้องเก็บข้อมูลสินค้าไว้ซ้ำใน	ตาราง order_item

การใช้งานจริงของตาราง 3-6 อ้างอิงจากการใช้งานในระบบ
a. เมื่อลูกค้าเพิ่มสินค้าลงตะกร้า:
- ตรวจสอบว่าลูกค้ามี cart(3) หรือไม่ ถ้าไม่มีให้สร้างใหม่
- เพิ่มหรืออัปเดต cart_item(4) สำหรับสินค้านั้นๆ
- อัปเดต last_updated ใน cart(3)

b. เมื่อลูกค้ายืนยันการสั่งซื้อ:
- สร้าง order(5) ใหม่
- คัดลอกข้อมูลจาก cart_item(4) ไปยัง order_item(6)
- คำนวณ total_amount สำหรับ order(5)
- ลบข้อมูลใน cart(3) และ cart_item(4)

7. Product (ข้อมูลสินค้า):เก็บข้อมูลเกี่ยวกับสินค้า
- ฟิลด์สำคัญ ได้แก่  รหัสสินค้า, ชื่อ, รายละเอียด, ราคา,หมวดหมู่ และจำนวนในสต็อก
- ความสัมพันธ์ระหว่างตารางต่างๆ
-> มีหลายสินค้าใน 1 หมวดหมู่ (Category) - many to one
-> 1product สามารถอยู่ในหลายรายการสั่งซื้อ (Order_item) - one to many
-> 1product มารถอยู่ในหลายตะกร้าสินค้า (Cart_item) - one to many
-> 1product สามารถเกี่ยวข้องกับหลายธุรกรรมสต็อก (inventory_transaction) - one to many

8. Category (หมวดหมู่สินค้า):เก็บข้อมูลเกี่ยวกับหมวดหมู่ของสินค้า
- ฟิลด์สำคัญ ได้แก่ เลขที่หมวดหมู่, ชื่อหมวดหมู่
- ความสัมพันธ์ระหว่างตารางต่างๆ
-> 1Category เก็บสินค้าได้หลายตัว(product) - one to many
-  เหตุผลในการออกแบบ : หมวดหมู่ช่วยจัดกลุ่มสินค้าให้ค้นหาและจัดการได้ง่ายและ ลดการซ้ำซ้อนของข้อมูลในตาราง product

9. Shipment (ข้อมูลการจัดส่ง):
- ฟิลด์สำคัญ ได้แก่ เลขที่จัดส่ง, เลขที่ใบสั่งซื้อ, วันที่จัดส่ง, และสถานะ
- ความสัมพันธ์ระหว่างตารางต่างๆ
-> 1order มี 1shipment - one to one
-  เหตุผลในการออกแบบ : ช่วยให้สามารถติดตามคำสั่งซื้อแต่ละรายการ

10. Stock_transaction (ธุรกรรมสินค้า):เก็บข้อมูลเกี่ยวกับการเปลี่ยนแปลงของสต็อกสินค้า
- ฟิลด์สำคัญ ได้แก่  เลขที่ธุรกรรม, รหัสลูกค้า,รหัสสินค้า, เลขที่ใบสั่งซื้อ
- ความสัมพันธ์ระหว่างตารางต่างๆ
-> สินค้าหลายรายการใน stock_transaction อ้างอิงสินค้ารายการเดียวใน product - many to one 
-> หลายธุรกรรมของสต็อกอาจเกี่ยวข้องกับคำสั่งซื้อรายการเดียว(order) - many to one 
-> หลายธุรกรรมอาจเกิดจากลูกค้าคนเดียวกัน - many to one
-  เหตุผลในการออกแบบ : ตาราง stock_transaction ช่วยติดตามปริมาณสต็อกที่เปลี่ยนแปลงสำหรับสินค้าแต่ละชิ้น และ ระบุว่าธุรกรรมเกิดขึ้นจากคำสั่งซื้อของลูกค้าคนใด

การใช้งานจริงของตาราง 7-10 อ้างอิงจากการใช้งาน
a. กรณีที่ลูกค้าสั่งซื้อสินค้าชนิดเดียวกันหลายชิ้น:
- จะมีการสร้าง order_item(6) หนึ่งรายการที่มี quantity เท่ากับจำนวนที่สั่งซื้อ 
- order_item(6) จะอ้างอิงไปยัง product(7) 

b. กรณีที่ลูกค้าหลายคนสั่งซื้อสินค้าชิ้นเดียวกัน:
- จะมีการสร้างorder_item(6) หลายรายการ 
- แต่ละ order_item(6) จะอ้างอิงไปยัง  product(7) เดียวกัน

c. เมื่อลูกค้ายืนยันการสั่งซื้อ
- สำหรับแต่ละorder_item(6) จะสร้าง stock_transaction(10) ใหม่
- อัปเดต quantity_in_stock ในตาราง product(7)